<%- include('../layouts/admin-header.ejs') %>

<div class="dash-content container add">
    <h2 class="page-title">Edit Product</h2>
    <a href="/admin/product" class="btn "><i class="fa fa-angle-left"></i></a>
    <br><br>
    <div class="row">
        <form id="add-edit" method="post" action="/admin/product/edit-product/<%= id %>" enctype="multipart/form-data">
            <% error.forEach(function(err){ %>
                <div class="alert alert-success" role="alert">
                    <%= err %>
                </div>
              <%})%>
            <div class="form-group">
                <input id="title" type="text" class="box" name="title" value="<%= title %>" placeholder="Title">
            </div> 
            <div class="form-group">
                <textarea id="description" type="text" class="box" cols="30" rows="10" name="description"  placeholder="description"><%= description %></textarea>
            </div>
            <div class="form-group">
                <select id="category" type="text" class="box" name="category" value="" placeholder="category">
                    <% categories.forEach(function(cat){ %>
                        <option value="<%= cat.title %>" <% if (cat.slug == category) { %>
                        selected="selected"
                        <% } %>        
                        > <%= cat.title %></option>
                    <% }); %>
                </select>
            </div>
            <div class="form-group">
                <input  id="image" type="file" class="box" name="image">
                <img  width="100px" height="100px" src="/public/images/product-img/<%=image%>" id="img-prvw" alt="">
                <input type="hidden" name="pimage" value="<%= image %>">

            </div>
            <div class="form-group d-flex">
                <div class="pe-5">
                    <input type="checkbox" name="special" id="special" value="<%=special%>" <% if(special==true){ %> checked <%}%> >
                    <label class="h4" for="special">Special</label>
                </div>
                <div>
                    <input type="checkbox" name="vegan" id="vegan" value="<%=vegan%>" <% if(vegan==true){ %> checked <%}%> >
                    <label class="h4" for="vegan">Vegan</label>
                </div>
            </div>
            <div class="form-group">
                <input id="price" type="text" class="box" name="price" value="<%= price %>" placeholder="price in rupees">
            </div>
            <br>
            <button type="submit" class="btn btn-default">Save</button>
        </form>

        <h3>Gallery Images</h3>
        <form id="add-edit" method="post" action="/admin/product/edit-product/add-gallery/<%= id %>" enctype="multipart/form-data">
            <% success.forEach(function(msg){ %>
                <div class="alert alert-success" role="alert">
                    <%= msg %>
                </div>
              <%})%>
            <input type="file" id="image" class="box" name="images" multiple>
            
            <% gallery.forEach(function(img){ %>
                <img  width="100px" height="100px" src="/public/images/product-img/<%=img%>" id="img-prvw" alt="">
                <a class="confirmDeletion" href="/admin/product/edit-product/delete-gallery/<%= id %>/<%= img %>"><i class="fa fa-trash"></i> </a>


            <%})%>
            <button type="submit" class="btn btn-default">Upload</button>

        </form>

    </div>
</div>
    
</section>


<%- include('../layouts/admin-footer.ejs') %>